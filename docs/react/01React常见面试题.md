# React常见面试题

## React Hook 有什么优势？

React Hook 的诞生是为了给函数组件提供状态和其他的React特性。也是为了解决一些React类组件的问题

类组件的缺点：

1. 组件间的状态逻辑很难复用。组件间如果有state的逻辑是相似的，class 模式下基本上是用高阶组件来解决的，虽然能够解决问题，但是我们需要在组件外部再包一层元素，会导致层级非常冗余。
2. 复杂业务的有状态组件会越来越复杂
3. 监听和定时器的操作，被分散在多个区域
4. this指向

Hook的优点：

1. 利于业务逻辑的封装和拆分，可以非常自由的组合各种自定义hooks . (自己封装的用到了react hooks的公共逻辑)
2. 可以在无需修改组件结构的情况下，复用状态逻辑
3. 定时器监听等等都被聚合到同一块代码下

## React 虚拟DOM

### 是什么？

- 虚拟 DOM 是 JS 对象；
- 虚拟 DOM 是对真实 DOM 的描述。

### 怎么做？

挂载阶段，React 将结合 JSX 的描述，构建出虚拟 DOM 树，然后通过 ReactDOM.render 实现虚拟 DOM 到真实 DOM 的映射，触发渲染流水线；

更新阶段，页面的变化在作用于真实 DOM 之前，会先作用于虚拟 DOM，虚拟 DOM 将在 JS 层借助算法先对比出具体有哪些真实 DOM 需要被改变，然后再将这些改变作用于真实 DOM。

### 为什么？

**React引入虚拟DOM的主要目的是为了提高开发体验，提高用户体验（异步可中断更新）**

好处：

1. 提高性能：将前后两次的虚拟 DOM 树进行对比，定位出具体需要更新的部分，实现精准的“差量更新”，避免DOM 操作的范围过大。显著提高性能。
2. 跨平台支持：虚拟DOM使得React可以在不同平台上进行渲染，包括Web、移动和桌面应用。由于虚拟DOM是React抽象出的中间层，可以将其连接到不同的渲染目标，如浏览器的DOM、React Native的原生组件等。
3. 简化开发：**虚拟 DOM 并不一定会带来更好的性能，React 官方也从来没有把虚拟 DOM 作为性能层面的卖点对外输出过。虚拟 DOM 的优越之处在于，它能够在提供更爽、更高效的研发模式（也就是函数式的 UI 编程方式）的同时，仍然保持一个还不错的性能。**

缺点：

1. 内存消耗：虚拟DOM需要在内存中维护UI的表示，因此会占用一定的内存空间。对于简单的应用来说，虚拟DOM的内存开销可能是不显著的，但对于大型和复杂的应用来说，特别是当应用数据量庞大时，虚拟DOM可能会占用较多的内存。
2. 初始渲染时间：虚拟DOM需要将组件结构转换为虚拟DOM树，并与真实DOM进行比较，以确定需要进行的更改。这个过程在初始渲染时可能会比直接操作真实DOM的方式稍微慢一些，因为它需要额外的转换和比较步骤。然而，这种性能差异在后续的更新中往往可以得到弥补，因为React在批量更新和最小化DOM操作方面表现出色。

影响渲染性能：
虚拟DOM的主要目标是通过优化DOM操作来提高渲染性能。它通过比较新旧虚拟DOM树的差异，只更新真正发生变化的部分，避免了不必要的DOM操作。这种**批量更新**和**最小化DOM操作**的方式确实可以显著提高性能，特别是在大型和复杂的应用中。
